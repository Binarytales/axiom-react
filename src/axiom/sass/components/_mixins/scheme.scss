@import '../../core/mixins';

///
$_scheme:  false;

@mixin forEachScheme {
  @each $scheme in $schemes {
    $_scheme: $scheme !global;
    $class: map-get($scheme, class);

    @at-root {
      .#{$class} #{&} {
        @content
      }
    }
  }

  $_scheme: false !global;
}

///
@function schemeProp($prop, $scheme: $_scheme) {
  @if (hasSchemeProp($prop, $scheme)) {
    @return map-get($scheme, $prop);
  } @else {
    @error "Scheme property `#{$prop}` does not exists";
    @return false;
  }
}

///
@function hasSchemeProp($prop, $scheme: $_scheme) {
  @return map-has-key($scheme, $prop);
}

///
@function schemeTextColor($color, $scheme: $_scheme) {
  $light-color: schemeProp(text-color-light);
  $dark-color:  schemeProp(text-color-dark);

  @if ($color == transparent) {
    @return inherit;
  }

  @return getContrastingColor(getColor($color), $light-color, $dark-color);
}
